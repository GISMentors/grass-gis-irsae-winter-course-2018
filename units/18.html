
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Unit 18 - Sentinel downloader &#8212; GRASS GIS IRSAE Winter Course 2018</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gismentors.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Unit 19 - Sentinel preprocessing" href="19.html" />
    <link rel="prev" title="Unit 17 - DTM script parallelization" href="17.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../index.html">GRASS GIS IRSAE Winter Course 2018</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="17.html" title="Unit 17 - DTM script parallelization"
             accesskey="P">previous</a> |
          <a href="19.html" title="Unit 19 - Sentinel preprocessing"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="unit-18-sentinel-downloader">
<h1>Unit 18 - Sentinel downloader<a class="headerlink" href="#unit-18-sentinel-downloader" title="Permalink to this heading">¶</a></h1>
<p>There are plenty of libraries or tools which allows downloading
Sentinel products from <a class="reference external" href="https://scihub.copernicus.eu/">Copernicus Open Access Hub</a>.</p>
<p>For GRASS GIS there is available <a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.html">i.sentinel</a> Addon
extension. It consists of fours GRASS modules:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.download.html">i.sentinel.download</a></p></li>
<li><p><a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.import.html">i.sentinel.import</a></p></li>
<li><p><a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.preproc.html">i.sentinel.preproc</a></p></li>
<li><p><a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.mask.html">i.sentinel.mask</a></p></li>
</ul>
<p id="grass-addons">Addons modules are not internal part of GRASS installation but can be
easily installed by <a class="reference external" href="https://grass.osgeo.org/grass83/manuals/g.extension.html">g.extension</a> (<span class="menuselection">Settings
‣ Addons extensions ‣ Install extension from addons</span>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g.extension<span class="w"> </span><span class="nv">extension</span><span class="o">=</span>i.sentinel
</pre></div>
</div>
<figure class="align-center" id="id1">
<img alt="../_images/g-extension.png" src="../_images/g-extension.png" />
<figcaption>
<p><span class="caption-number">Fig. 104 </span><span class="caption-text">Install <a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.html">i.sentinel</a> GRASS Addon.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Note that <a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.download.html">i.sentinel.download</a> requires also
<a class="reference external" href="https://pypi.python.org/pypi/sentinelsat">sentinelsat library</a> to
be installed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sentinelsat is already installed in the <a class="reference internal" href="../index.html#virtual-machine"><span class="std std-ref">tailored virtual
machine</span></a>. If you need to install it on your
machine, you can easily do that with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>sentinelsat
</pre></div>
</div>
<p>If you have not <cite>pip</cite> command, look <a class="reference external" href="https://pip.pypa.io/en/stable/installing/">how install it</a>.</p>
</div>
<p>First we are going to create a new mapset (<span class="menuselection">Settings
‣ GRASS working environment ‣ Create new mapset</span>) in <em>oslo-region</em>
location from <a class="reference internal" href="02.html"><span class="doc">Unit 02 - First steps</span></a> to store all the Sentinel data and start to
work in it.</p>
<figure class="align-center" id="id2">
<img alt="../_images/sentinel_mapset.png" class="small" src="../_images/sentinel_mapset.png" />
<figcaption>
<p><span class="caption-number">Fig. 105 </span><span class="caption-text">Create a new mapset for Sentinel data and switch to it.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to create a new mapset and switch to it using
<a class="reference external" href="https://grass.osgeo.org/grass83/manuals/g.mapset.html">g.mapset</a> GRASS module.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g.mapset<span class="w"> </span>-c<span class="w"> </span><span class="nv">mapset</span><span class="o">=</span>sentinel
</pre></div>
</div>
</div>
<p>Let’s download suitable Sentinel products for our area of interest
(AOI) and perform NDVI calculation as described in <a class="reference internal" href="05.html"><span class="doc">Unit 05 - Simple computation</span></a>
(implemented as a model in <a class="reference internal" href="08.html"><span class="doc">Unit 08 - Modeler</span></a> or as a Python script in
<a class="reference internal" href="11.html"><span class="doc">Unit 11 - PyGRASS scripting</span></a>).</p>
<p>In our case AOI region is defined by Oslo county imported in
<a class="reference internal" href="03.html"><span class="doc">Unit 03 - Data Management</span></a>.</p>
<p>Now we can search for suitable Sentinel products. <a class="reference external" href="https://www.sentinel-hub.com/blog/sentinel-2-l2a-products-available-sentinel-hub">Sentinel-2 L2A
products</a>
will be used to avoid need of computing atmospheric corrections at
this moment. Let’s search for latest available product by
<a class="reference external" href="https://grass.osgeo.org/grass83/manuals/i.sentinel.download.html">i.sentinel.download</a>. At first with <span class="param">-l</span> flag given,
just to print results, download procedure will be performed later. In
order to search and download Sentinel products, you have to create an
user account in Copernicus Open Access Hub, see manual page of
<a class="reference external" href="https://grass.osgeo.org/grass83/manuals/i.sentinel.download.html">i.sentinel.download</a> module for details. Create a new file
<code class="file docutils literal notranslate"><span class="pre">sentinel.txt</span></code> containing two lines with your username and
password.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To get username and password you need to register to the
<a class="reference external" href="https://scihub.copernicus.eu/">Copernicus Open Access Hub</a>,
see <a class="reference external" href="https://scihub.copernicus.eu/dhus/#/self-registration">Register new account</a>
page for signing up.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>i.sentinel.download<span class="w"> </span>-l<span class="w"> </span><span class="nv">map</span><span class="o">=</span>oslo<span class="w"> </span><span class="nv">producttype</span><span class="o">=</span>S2MSI2Ap<span class="w"> </span><span class="nv">settings</span><span class="o">=</span>sentinel.txt
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">No</span> <span class="n">product</span> <span class="n">found</span>
</pre></div>
</div>
<p>By default the module returns products for last 60 days. Let’s change
search period by <span class="param">start</span> and <span class="param">end</span> options. To be sure
that our AOI is fully covered by a Sentinel product we also set
<span class="param">area_relation</span> option. We can also limit products by
<span class="param">clouds</span> coverage percentage threshold.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>i.sentinel.download<span class="w"> </span>-l<span class="w"> </span><span class="nv">map</span><span class="o">=</span>oslo<span class="w"> </span><span class="nv">producttype</span><span class="o">=</span>S2MSI2Ap<span class="w"> </span><span class="nv">settings</span><span class="o">=</span>sentinel.txt<span class="w"> </span><span class="se">\</span>
<span class="nv">start</span><span class="o">=</span><span class="m">2017</span>-04-01<span class="w"> </span><span class="nv">end</span><span class="o">=</span><span class="m">2017</span>-10-01<span class="w"> </span><span class="nv">area_relation</span><span class="o">=</span>Contains<span class="w"> </span><span class="nv">clouds</span><span class="o">=</span><span class="m">10</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span> <span class="n">Sentinel</span> <span class="n">product</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">found</span>
<span class="mi">2</span><span class="n">a894e37</span><span class="o">-</span><span class="mi">1</span><span class="n">cf5</span><span class="o">-</span><span class="mi">4</span><span class="n">bfc</span><span class="o">-</span><span class="n">ab42</span><span class="o">-</span><span class="mf">9e32</span><span class="n">b99f423f</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">23</span><span class="n">T10</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">31</span><span class="n">Z</span>  <span class="mi">1</span><span class="o">%</span> <span class="n">S2MSI2Ap</span>
<span class="mf">71e0</span><span class="n">c5be</span><span class="o">-</span><span class="n">d008</span><span class="o">-</span><span class="mi">4</span><span class="n">b71</span><span class="o">-</span><span class="n">a8f3</span><span class="o">-</span><span class="mi">97</span><span class="n">f4c42ba09a</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">06</span><span class="n">T10</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">31</span><span class="n">Z</span>  <span class="mi">2</span><span class="o">%</span> <span class="n">S2MSI2Ap</span>
<span class="mi">74</span><span class="n">cf18cf</span><span class="o">-</span><span class="mi">3</span><span class="n">cae</span><span class="o">-</span><span class="mi">4</span><span class="n">d80</span><span class="o">-</span><span class="n">b1c8</span><span class="o">-</span><span class="mi">9</span><span class="n">f2ee29972b4</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">26</span><span class="n">T10</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">31</span><span class="n">Z</span>  <span class="mi">4</span><span class="o">%</span> <span class="n">S2MSI2Ap</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If more products have been found you can limit search by
<span class="param">limit</span> option.</p>
</div>
<p>Let’s download desired product(s). Just remove <span class="param">-l</span> flag and
add <span class="param">output</span> option in order to define path to output directory
where data should be saved.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>i.sentinel.download<span class="w"> </span><span class="nv">map</span><span class="o">=</span>oslo<span class="w"> </span><span class="nv">producttype</span><span class="o">=</span>S2MSI2Ap<span class="w"> </span><span class="nv">settings</span><span class="o">=</span>sentinel.txt<span class="w"> </span><span class="se">\</span>
<span class="nv">start</span><span class="o">=</span><span class="m">2017</span>-01-01<span class="w"> </span><span class="nv">end</span><span class="o">=</span><span class="m">2017</span>-10-01<span class="w"> </span><span class="nv">area_relation</span><span class="o">=</span>Contains<span class="w"> </span><span class="nv">clouds</span><span class="o">=</span><span class="m">10</span><span class="w"> </span><span class="nv">limit</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">output</span><span class="o">=</span>geodata/sentinel/2017
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pre-downloaded Sentinel scene is available in sample
dataset:</p>
<p><code class="file docutils literal notranslate"><span class="pre">geodata/sentinel/2017/S2A_MSIL2A_20170523T104031_N0205_R008_T32VNM_20170523T104025.SAFE</span></code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Before importing or linking try to print list of filtered
raster files including projection match (second column 1 for match
otherwise 0). If projection of input data differs from current
location consider reprojection (<span class="param">-r</span>) or creating a new
location for import.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>i.sentinel.import<span class="w"> </span>-p<span class="w"> </span><span class="nv">input</span><span class="o">=</span>geodata/sentinel/2017<span class="w"> </span><span class="nv">pattern</span><span class="o">=</span><span class="s2">&quot;20170523T104031_B0(2|3|4|8)_10m&quot;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>i.sentinel.import<span class="w"> </span>-p<span class="w"> </span><span class="se">\</span>
<span class="nv">input</span><span class="o">=</span>geodata/sentinel/2017/S2A_MSIL2A_20170523T104031_N0205_R008_T32VNM_20170523T104025.SAFE<span class="w"> </span><span class="se">\</span>
<span class="nv">pattern</span><span class="o">=</span><span class="s2">&quot;B0(2|3|4|8)_10m&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.../</span><span class="n">L2A_T32VNM_20170523T104031_B02_10m</span><span class="o">.</span><span class="n">jp2</span> <span class="mi">1</span> <span class="p">(</span><span class="n">EPSG</span><span class="p">:</span> <span class="mi">32632</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<p>In the next step downloaded data can be imported to GRASS by
<a class="reference external" href="https://grass.osgeo.org/grass83/manuals/addons/i.sentinel.import.html">i.sentinel.import</a>. The command will import <strong>all</strong>
Sentinel bands from <span class="param">input</span> directory recursively. Sentinel
bands to be imported can be optionally filtered by <span class="param">pattern</span>
option. In example below 2nd, 3rd, 4th and 8th bands in 10m resolution
will be imported. By default input data are imported into GRASS
format, alternatively data can be linked if <span class="param">-l</span> is given. It
is also useful to import cloud mask vector features by <span class="param">-c</span>
flag.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>i.sentinel.import<span class="w"> </span>-l<span class="w"> </span>-c<span class="w"> </span><span class="nv">input</span><span class="o">=</span>geodata/sentinel/2017<span class="w"> </span><span class="nv">pattern</span><span class="o">=</span><span class="s2">&quot;20170523T104031_B0(2|3|4|8)_10m&quot;</span>
</pre></div>
</div>
<section id="rgb-composition">
<h2>RGB composition<a class="headerlink" href="#rgb-composition" title="Permalink to this heading">¶</a></h2>
<p>Imported Sentinel bands can be vizualized as a RGB composition. Select
<a class="reference internal" href="../_images/layer-rgb-add.png"><img alt="grass-layer-rgb-add" src="../_images/layer-rgb-add.png" style="width: 1.5em;" /></a> <sup>Add RGB map layer</sup> from the Layer Manager.</p>
<figure class="align-center" id="id3">
<img alt="../_images/add_rgb.png" class="large" src="../_images/add_rgb.png" />
<figcaption>
<p><span class="caption-number">Fig. 106 </span><span class="caption-text">Add RGB map layer.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The result appears really dark, see <a class="reference internal" href="#rgb-dark-fig"><span class="std std-numref">Fig. 107</span></a>.</p>
<figure class="align-center" id="id4">
<span id="rgb-dark-fig"></span><img alt="../_images/rgb_dark.png" class="large" src="../_images/rgb_dark.png" />
<figcaption>
<p><span class="caption-number">Fig. 107 </span><span class="caption-text">RGB composition with default grey color table.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Color table can be auto-balanced for RGB bands by GRASS module
<a class="reference external" href="https://grass.osgeo.org/grass83/manuals/i.color.enhance.html">i.color.enhance</a>. This module modifies the color table of
each image band to provide a more natural color mixture, the base data
remains untouched.</p>
<figure class="align-center" id="id5">
<img alt="../_images/icolorsenhance.png" src="../_images/icolorsenhance.png" />
<figcaption>
<p><span class="caption-number">Fig. 108 </span><span class="caption-text">Auto-balance color table for RGB composition.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>To see enhanced RGB composition click on <a class="reference internal" href="../_images/layer-redraw.png"><img alt="grass-layer-redraw" src="../_images/layer-redraw.png" style="width: 1.5em;" /></a>
<sup>Render map</sup> in Map Display.</p>
<figure class="align-center" id="id6">
<img alt="../_images/rgb_good.png" class="large" src="../_images/rgb_good.png" />
<figcaption>
<p><span class="caption-number">Fig. 109 </span><span class="caption-text">Enhanced RGB composition.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01.html">Unit 01 - About GRASS GIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="02.html">Unit 02 - First steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="03.html">Unit 03 - Data Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="04.html">Unit 04 - Modules, Region</a></li>
<li class="toctree-l1"><a class="reference internal" href="05.html">Unit 05 - Simple computation</a></li>
<li class="toctree-l1"><a class="reference internal" href="06.html">Unit 06 - Data export</a></li>
<li class="toctree-l1"><a class="reference internal" href="07.html">Unit 07 - QGIS loves GRASS</a></li>
<li class="toctree-l1"><a class="reference internal" href="08.html">Unit 08 - Modeler</a></li>
<li class="toctree-l1"><a class="reference internal" href="09.html">Unit 09 - Model tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="10.html">Unit 10 - Python intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="11.html">Unit 11 - PyGRASS scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="12.html">Unit 12 - Script User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="13.html">Unit 13 - PyGRASS Raster Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="14.html">Unit 14 - PyGRASS Vector Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="15.html">Unit 15 - DMT reprojection</a></li>
<li class="toctree-l1"><a class="reference internal" href="16.html">Unit 16 - Lidar, DTM interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="17.html">Unit 17 - DTM script parallelization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Unit 18 - Sentinel downloader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rgb-composition">RGB composition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="19.html">Unit 19 - Sentinel preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="20.html">Unit 20 - MODIS LST</a></li>
<li class="toctree-l1"><a class="reference internal" href="21.html">Unit 21 - Spatio-temporal intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="22.html">Unit 22 - Spatio-temporal basic analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="23.html">Unit 23 - Spatio-temporal NDVI</a></li>
<li class="toctree-l1"><a class="reference internal" href="24.html">Unit 24 - Spatio-temporal scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="25.html">Unit 25 - Spatio-temporal parallelization</a></li>
<li class="toctree-l1"><a class="reference internal" href="26.html">Unit 26 - Spatio-temporal LST script</a></li>
<li class="toctree-l1"><a class="reference internal" href="27.html">Unit 27 - Regression analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="28.html">Unit 28 - Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="29.html">Unit 29 - GRASS GIS and R</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Gallery</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="17.html" title="Unit 17 - DTM script parallelization"
              >previous</a> |
            <a href="19.html" title="Unit 19 - Sentinel preprocessing"
              >next</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025 GISMentors.eu.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>